{% extends "base.html" %}

{% block extra_head %}
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css'> 
<link rel="stylesheet" href="{{ url_for('static', filename='css/bulma-steps.min.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/my-bulma-steps.css') }}">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
    .link-container {
        display: inline-block;
        margin-right: 40px;
    }

    .container>p { 
        display: flex;
        justify-content: space-between;
    } 

    .container>.tabs { 
        margin-top: 30px; 
    } 

    .floating-nav {
        position: fixed;
        bottom: 20px;
        right: calc((100% - 1200px) / 2 + 20px); /* Align with container's right edge */
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        padding: 12px 24px;
        z-index: 1000;
        display: flex;
        gap: 12px;
        align-items: center;
    }

    .floating-nav .button {
        background: transparent;
        border: none;
        padding: 8px 16px;
        transition: transform 0.2s ease;
    }

    .floating-nav .button:hover {
        transform: translateY(-2px);
    }

    .floating-nav .button i {
        font-size: 20px;
        color: var(--primary-color);
    }
ink
    .floating-nav #submit-btn i {
        color: #23d160;
    }

    .floating-nav #submit-btn {
        background: rgba(35, 209, 96, 0.1);
        border-radius: 8px;
    }

    .floating-nav #submit-btn:hover {
        background: rgba(35, 209, 96, 0.2);
    }

    /* Add margin-top to account for fixed header */
    .content-wrapper {
        margin-top: 100px;
    }

    /* Responsive adjustment for floating nav */
    @media (max-width: 1240px) { /* 1200px container + 40px padding */
        .floating-nav {
            right: 20px; /* Reset to viewport edge on smaller screens */
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="content-wrapper">
    <h2 class="subtitle has-text-centered">Strategic Allocation For Preferred Lifestyle & Peace Of Mind</h2>

    <br>
    <br>
    <div class="container"> 
        <div id="message-container"></div>
        <div class="steps my-step-style has-content-centered" id="steps-plan" style="margin-bottom: 1rem;">
            <div class="steps-segment is-active" id="funds" data-target="funds">
                <a href="#">
                    <span class="steps-marker is-primary">1</span>
                    <div class="steps-content">
                      <p class="is-size-6">Funds</p>
                    </div>
                </a>
            </div>
            <div class="steps-segment is-dashed" id="expenses" data-target="expenses">
                <a href="#">
                    <span class="steps-marker is-primary">2</span>
                    <div class="steps-content">
                      <p class="is-size-6">Expenses</p>
                    </div>
                </a>                    
            </div>
            <div class="steps-segment is-dashed" id="income" data-target="income">
                <a href="#">
                    <span class="steps-marker is-info">?</span>
                    <div class="steps-content">
                      <p class="is-size-6">Income</p>
                    </div>
                </a>
            </div>
            <div class="steps-segment" id="strategic" data-target="strategic">
                <a href="#">
                    <span class="steps-marker is-info">?</span>
                    <div class="steps-content">
                      <p class="is-size-6">Risk Handling</p>
                    </div>
                </a>
            </div>
        </div>         
        
        <div class="floating-nav">
            <button class="button" id="prev-btn" disabled>
                <i class="fas fa-arrow-left"></i>
            </button>
            <button class="button is-hidden" type="submit" id="submit-btn">
                <span class="icon is-small"><i class="fas fa-check"></i></span>
                <span>Submit</span>
            </button>
            <button class="button" id="next-btn">
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
        
        <div class="content-container" style="padding-bottom: 60px; margin-top: 0;">
            <div id="tab-content">
                <form id="rform" novalidate> 
                    <div id="funds-content" class="content-tab"></div>
                    <div id="expenses-content" class="content-tab" style="display:none;"></div>
                    <div id="income-content" class="content-tab" style="display:none;"></div>
                    <div id="strategic-content" class="content-tab" style="display:none;"></div>
                </form>
            </div>
        </div>
    </div> 
</div>
{% endblock %}

{% block footer %}
<footer class="site-footer site-footer-minimal">
    <div class="container">
        <p>&copy; {{ current_year }} DynaRetire. All rights reserved. | <a href="{{ url_for('privacy') }}" style="color: var(--text-dark); text-decoration: underline;">Privacy Policy</a></p>
        <p class="mt-2" style="font-size: 0.85rem; opacity: 0.8;">Your data is securely discarded after delivering the Excel. We do not retain any trace of your submitted data or the generated results.</p>
    </div>
</footer>
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="{{ url_for('static', filename='js/plan/plan.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/utilities/json_data.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/utilities/validation.js') }}"></script>
{% endblock %}
